{% extends 'partials/base.html' %}
{% block title %}Staff Detail Page{% endblock %}
{% block headers %} VIEW ACCOUNT {% endblock %}
{% load static %}
{% block content %}

<script type="text/javascript" defer>
    $(window).on('load', function() {
        $('.toast').toast();
        {% if messages %}
            $('.toast').show();
        {% endif %}
        {% block script %}
        
        {% endblock %}
    });

</script>

<div style="margin-top: 64px;" class="dark:white flex flex-col gap-3">
    <div class="animate fade-animator h-[auto] delay-1 bg-[#ff880000] overflow-hidden w-full rounded-[20px] min-h-[240px] flex flex-col text-center justify-center items-center font-sans">
        <div class="z-[0] h-[40vh] cover mix-blend-multiply saturate-0 w-full" style="mix-blend-mode: multiply;opacity:0.05;background:url('/static/images/bulsu_logo.png');background-size:cover; background-position: center;">
        </div>
        <div class="z-[1] absolute" style="width:80%">
            <div class="dark:white">
                <div class="flex justify-between">
                    <div class="grid grid-flow-col gap-4 items-center">
                        <div class="rounded-full" style="border-radius:100%;background-image: url('{{ user.profile.image.url }}');width:20vh;height:20vh;background-size: cover;"></div>
                        <div class="leading-[1] text-left">
                            <h1 class="font-sans font-bold tracking-[-2px]">{{ user.first_name }} {{ user.last_name }}</h1>
                            <p class="capitalize opacity-50 text-sm mt-[-10px]">{{ user.profile.user_role }}</p>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <div class="flex items-center gap-2 ">
                            <div class="items-center dark:hover:bg-white dark:hover:text-black button-standard border border-[rgba(200,200,200,0.5)] px-2 py-1 rounded-md flex gap-2">
                                <img src="/static/images/add_user.png" class="dark:invert" style="height:14px;width:14px"/>
                                Share
                            </div>
                            <a class="form-modal-toggler main-theme-bg" title="Update Profile" href="javascript:void();" value="{% url 'user-profile-update' %}">Edit Profile</a>
        
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <p class="text-center text-lg font-bold">Posts</p>
        <div class="grid gap-3 grid-cols-3 [&>div]:rounded-md w-full">
            {% if feeds|length > 0 %}
                {% for feed in feeds %}
                    <div aria-expanded="false" aria-controls="drawer-name" data-drawer-trigger id="research-{{ research.id }}" class="trigger research-item flex flex-col justify-between max-h-[200px] bg-[#f5f5f5] dark:bg-[#363636] animate glow delay-{{forloop.counter}}" style="padding: 25px">
                        <div class="flex justify-between">
                            <p class="font-bold" style="font-weight:bold;font-size:20px; letter-spacing: -1px; line-height: 1">{{ research.research_title|slice:":50" }}</p>
                            <p class="text-right text-sm">{{ feed.date_added|date:"M d Y" }}</p>
                        </div>
                        <div>
                            <p style="white-space:normal; max-height:70px; overflow:hidden; text-overflow:ellipsis; word-wrap: break-word">{{ research.abstract }}</p>
                        </div>
                        <div class="flex justify-between">
                            <div class="flex gap-2">
                                {% for user in users %}
                                    {% if feed.user_id_id == user.id %}
                                        <img src="/media/{{ user.image }}" class="rounded-full" style="height:20px;width:20px"/>
                                        <p class="font-bold">{{ user.user.first_name }}  {{ user.user.last_name }}</p>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <p class="px-2 py flex items-center" style="font-size:10px;border:1px solid #d59c31; color:#d59c31">{{ feed.research_progress }}</p>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
    <div>
        <p class="text-center text-lg font-bold">Researches</p>
        <div class="grid gap-3 grid-cols-3 [&>div]:rounded-md w-full">
            {% for i in "x"|rjust:"3" %}
                <div class="dark:bg-[#363636] bg-[#F4F4F4] p-[10px] animate glow delay-{{forloop.counter}}">
                    <strong> TITLE </strong> <br>
                    DESC
                </div>
            {% endfor %}
        </div>
    </div>

    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} my-2 mx-4" role="alert">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}

</div>
{% endblock %}